<div class="container">
  <div class="row">
    <div class="col-xs-9 main-container">

      <form [formGroup]="personForm" (submit)="savePerson()">
        <div class="form-group add-person row">
          <div class="add-name col-xs-5">
            <input 
              style="margin-top:25px" 
              type="text" 
              class="form-control" 
              placeholder="Add a person" 
              name="addPerson" 
              formControlName="addPerson" />
          </div>
          <div class="add-traits col-xs-7">
            <label class="form-check-label">
              <input 
                type="checkbox" 
                formControlName="superPower" 
                class="form-check-input">
                Super Power
            </label>
            <label class="form-check-label">
              <input 
                type="checkbox" 
                formControlName="rich" 
                class="form-check-input">
                Rich
            </label>
            <label class="form-check-label">
              <input 
                type="checkbox" 
                formControlName="genius" 
                class="form-check-input">
                Genius
            </label>
            <button 
              type="submit" 
              class="btn btn-primary" 
              [disabled]="!personForm.valid">Submit</button>
          </div>
        </div>
        <div class="alert alert-success" [hidden]="!alert.show" role="alert">
          New person has been added to the list
        </div>
      </form>


      <div class="persons-container">

        <table class="table table-striped">
          <thead>
            <tr>
              <th (click)="arrange('_name')">
                <span 
                  class="glyphicon arrow"
                  [ngClass]="{
                    'glyphicon-triangle-right':arrangeValues.name === null,
                    'glyphicon-triangle-bottom': arrangeValues.name === true,
                    'glyphicon-triangle-top': arrangeValues.name === false
                  }"
                  ></span>Name
              </th>
              <th 
                *ngFor="let trait of traits.list" 
                (click)="arrange(trait.id)">
                  <span 
                    class="glyphicon arrow"
                    [ngClass]="{
                      'glyphicon-triangle-right':arrangeValues[trait.id] === null,
                      'glyphicon-triangle-bottom': arrangeValues[trait.id] === true,
                      'glyphicon-triangle-top': arrangeValues[trait.id] === false
                    }"></span>
                  {{trait.value}}
              </th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let person of filterPeople;">
              <td>{{person.name}}</td>

              <td *ngFor="let trait of traits.list">
                <input 
                  type="checkbox" 
                  (change)="onChange($event,person,trait.id)" 
                  [checked]="person[trait.id]" />
                </td>

              <td class="delete">
                <button 
                  type="button" 
                  (click)="person.delete = true" 
                  class="btn btn-secondary btn-sm btn-danger" 
                  value="x"
                  [class.hidden]="person.delete">
                <span class="glyphicon glyphicon-trash"></span>
                </button>
                <label [class.hidden]="!person.delete">
                  Are you sure? 
                  <input 
                    type="button" 
                    value="Yes" 
                    (click)="removePerson(person)"
                    class="btn btn-secondary btn-sm btn-danger" />
                  <input 
                    type="button" 
                    value="no" 
                    (click)="person.delete = false"
                    class="btn btn-secondary btn-sm btn-danger" />
                  </label>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="5">
                <div class="filters">
                  <span *ngFor="let trait of traits.list">
                    <a 
                      href="#{{trait.id}}" 
                      [class.active]="filterValue == trait.id"
                      [class.disabled]="trait.count <= 0" 
                      (click)="filterArray(trait.id)">{{trait.value}}</a><span>|</span>
                  </span>
                  <a 
                    href="#" 
                    (click)="filterArray()" 
                    [class.active]="!filterValue">All</a>
                </div>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

  <!--   <app-sidebar 
      [traitCount]="traitCount" 
      [traits.list]="traits.list"
      [people]="people"
      [filterArray]="filterArray"
      class="col-xs-3 side-container">
    </app-sidebar> -->

    <div class="container" style="position:fixed; z-index:-1">
      <div class="col-xs-3 col-xs-offset-9">
        <h3>Total People: {{people.length}}</h3>
        <ul class="list-group">
          <li class="list-group-item" *ngFor="let trait of traits.list">
            <a 
              href="#{{trait.id}}" 
              (click)="filterArray(trait.id)">{{trait.value}}
            <span class="badge" [class.active]="trait.count > 0">{{[trait.count]}}</span>
            </a>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>